<!--Blur part -->
<div [class.blur]="isbooking">
  <div class="heading flex">
    <div>
      <h1 id="headinhgH1">Parking Dashboard</h1>
      <p>Manange and monitor the parking spot</p>
    </div>

    <div>
      <!--<input class="InputSearch" type="search" placeholder="Search Spot number">-->

      <select class="InputSearch" [(ngModel)]="siteid" (change)="getBuildings()">
        <option value="0">select site</option>
          @for (item of SiteList_Data; track $index) 
          {
          <option [value]="item.siteId">{{item.siteName}}</option>
          }
      </select>

      <select class="InputSearch" [(ngModel)]="buildingId" (change)="getFloors()">
        <option value="0">select Building</option>
          @for (item of BuildlingList_Data; track $index) 
          {
          <option [value]="item.buildingId">{{item.buildingName}}</option>
          }
      </select>

      <select class="InputSearch" [(ngModel)]="Custom_FloorId" (change)="OnfloorSelect()">
        <!--[(ngModel)]="FloorId" data Binding with JS=html-->
        <option value="0">select floor</option>
          @for (item of FloorData_List; track $index) 
          {
          <option [value]="item.floorId">{{item.floorNo}}</option>
          }
      </select>
    </div>
  </div>
  <div class="Information flex">
    <!--1-->
    <div class="Inform flex">
      <div class="info">
        <p class="text">Total Spots</p>
        <p class="digit">50</p>
      </div>
      <div class="InfoColor1"></div>
    </div>
    <!--2-->
    <div class="Inform flex">
      <div class="info">
        <p class="text">Available</p>
        <p class="digit">28</p>
      </div>
      <div class="InfoColor2"></div>
    </div>
    <!--3-->
    <div class="Inform flex">
      <div class="info">
        <p class="text">Occupied</p>
        <p class="digit">22</p>
      </div>
      <div class="InfoColor3"></div>
    </div>
    <!--4-->
    <div class="Inform flex">
      <div class="info">
        <p class="text">Occupy Rate</p>
        <p class="digit">50%</p>
      </div>
      <div class="InfoColor4"></div>
    </div>
  </div>

  <div class="Layout" style="margin-left: 30px">
    <p>Parking layout</p>
  </div>

  <br/>

  <div class="ParkReserve flex">
    <div class="parkingLayout flex">
      <div class="layout flex">
        <div class="LayoutColorIncon1"></div>
        <p>Avaialable ({{parkingSpotArray.length}})</p>
      </div>
      <div class="layout flex">
        <div class="LayoutColorIncon2"></div>
        <p>Occupy</p>
      </div>
      <div class="layout flex">
        <div class="LayoutColorIncon3"></div>
        <p>Reserved</p>
      </div>
      <div class="layout flex">
        <div class="LayoutColorIncon4"></div>
        <p>Maintain</p>
      </div>
    </div>

    <div class="parking-layout">
        <!--parkingSpotArray responsible for all spotcard-->
       @for (Each_Spot of parkingSpotArray ; track $index) 
       {
        <div class="ParkingSpot" [class.red-background]="occupiedSpots[Each_Spot]">
          
         @if(occupiedSpots[Each_Spot]) 
         { 
          <div class="ParkingSp" (click)="ReleaseForm(Each_Spot)">
            <div style="border: 2px solid rgb(12, 75, 69); padding: 1px">P</div>
            <div style="font-weight: bold">{{ Each_Spot }}</div>
            <div class=parkingStatus_Occupied> Occupied</div> 
            <div>{{occupiedSpots[Each_Spot].vehicleNo}}</div>   
         </div>
         }@else{
          <div class="ParkingSp" (click)="OpenForm(Each_Spot)">   

            <div style="border: 2px solid rgb(12, 75, 69); padding: 1px">P</div>
            <div style="font-weight: bold">{{ Each_Spot }}</div>
            <div class=parking-status>Available</div> 
          </div>  
         }
        </div>
        } 
    </div>

  </div>
</div>
<!-- overlay -->
<!--Book Spot Model Form -->
<div #BookingSpotFrom class="bookingSpot">
  <div class="bookingmodel flex">
    <div class="Heading flex">
      <div id="closeForm" class="uil uil-times" (click)="ClosForm()">Close</div>
      <h1 style="align-content: center">Booking parking Spot</h1>
    </div>

    <div class="formDiv flex">
      <form class="formDiv flex">
        <div class="Insideform">
          <label for="">Parking Spot Number</label><br />
          <input name="parkingNumber" [(ngModel)]="ConfirmParking.parkSpotNo" placeholder="Enter Parking Spot Number" readonly type="text"/>
        </div>
        <div class="Insideform">
          <label for="">Vehicle Number</label><br />
          <input name="vehicleNo" [(ngModel)]="ConfirmParking.vehicleNo" placeholder="Enter VehicleNumber" type="text"/>
        </div>
        <div class="Insideform">
          <label for=""> Amount</label> <br />
          <input name="amount" [(ngModel)]="ConfirmParking.amount" placeholder="Amount" type="text"/>
        </div>
        <div class="Insideform">
          <label for="">Customer Name</label> <br />
          <input name="custName" [(ngModel)]="ConfirmParking.custName" placeholder="Customer Name" type="text"/>
        </div>
        <div class="Insideform">
          <label for="">Contact Number</label><br />
          <input name="custMobileNo" [(ngModel)]="ConfirmParking.custMobileNo" placeholder="Contact Number" type="text"/>
        </div>
        <div class="Insideform">
          <label for="">Entry Time</label><br />
          <input name="inTime" [(ngModel)]="ConfirmParking.inTime" placeholder="Entry Time" type="date" />
        </div>
        <button type="button"class="cancellBtw" (click)="ConfirmAddParking()">Confirm</button>
      </form>
    </div>
  </div>
</div>
<!-- release form-->

<div #ReleaseSpot class="ReleaseForm flex">
       <div class="Heading flex">
          <div id="closeForm" class="uil uil-times" (click)="ClosReleaseForm()">Close</div>
          <h1>Release Spot</h1>
        </div>
       <div class="Con_body flex">
          <div>
            <h3>Do you want to release the spot {{allocateSpot}}</h3>
            </div>
          <div class="Release_btw">
            <button type="button"class="cancellBtw" (click)="Releaseyes_btn()">Yes</button>
            <button type="button"class="cancellBtw" (click)="ClosReleaseForm()">No</button>
          </div>
       </div>
</div>
